[
    {
        "name": "users",
        "type": "auth",
        "system": false,
        "schema": [
            {
                "name": "name",
                "type": "text",
                "required": true,
                "options": {
                    "min": 1,
                    "max": 100
                }
            },
            {
                "name": "role",
                "type": "select",
                "required": true,
                "options": {
                    "values": [
                        "admin",
                        "operator",
                        "member"
                    ]
                }
            },
            {
                "name": "status",
                "type": "select",
                "required": false,
                "options": {
                    "values": [
                        "online",
                        "offline",
                        "suspended"
                    ]
                }
            },
            {
                "name": "last_activity",
                "type": "date",
                "required": false
            }
        ],
        "listRule": "@request.auth.id != ''",
        "viewRule": "@request.auth.id != ''",
        "createRule": "",
        "updateRule": "@request.auth.id = id",
        "deleteRule": "@request.auth.role = 'admin'"
    },
    {
        "name": "companies",
        "type": "base",
        "system": false,
        "schema": [
            {
                "name": "company_name",
                "type": "text",
                "required": true,
                "options": {
                    "min": 1,
                    "max": 200
                }
            },
            {
                "name": "owner_name",
                "type": "text",
                "required": false,
                "options": {
                    "max": 100
                }
            },
            {
                "name": "company_location",
                "type": "text",
                "required": false,
                "options": {
                    "max": 200
                }
            },
            {
                "name": "google_maps_link",
                "type": "url",
                "required": false
            },
            {
                "name": "phone_numbers",
                "type": "text",
                "required": false,
                "options": {
                    "max": 500
                }
            },
            {
                "name": "source",
                "type": "text",
                "required": false,
                "options": {
                    "max": 100
                }
            }
        ],
        "listRule": "@request.auth.id != ''",
        "viewRule": "@request.auth.id != ''",
        "createRule": "@request.auth.id != ''",
        "updateRule": "@request.auth.id != ''",
        "deleteRule": "@request.auth.role = 'admin'"
    },
    {
        "name": "leads",
        "type": "base",
        "system": false,
        "schema": [
            {
                "name": "username",
                "type": "text",
                "required": true,
                "options": {
                    "min": 1,
                    "max": 100
                }
            },
            {
                "name": "status",
                "type": "select",
                "required": true,
                "options": {
                    "values": [
                        "Cold No Reply",
                        "Replied",
                        "Warm",
                        "Booked",
                        "Paid",
                        "Client",
                        "Excluded"
                    ]
                }
            },
            {
                "name": "first_contacted",
                "type": "date",
                "required": false
            },
            {
                "name": "last_updated",
                "type": "date",
                "required": false
            },
            {
                "name": "notes",
                "type": "text",
                "required": false,
                "options": {
                    "max": 5000
                }
            },
            {
                "name": "email",
                "type": "email",
                "required": false
            },
            {
                "name": "phone",
                "type": "text",
                "required": false,
                "options": {
                    "max": 100
                }
            },
            {
                "name": "contact_source",
                "type": "text",
                "required": false,
                "options": {
                    "max": 200
                }
            },
            {
                "name": "source",
                "type": "text",
                "required": false,
                "options": {
                    "max": 100
                }
            }
        ],
        "indexes": [
            "CREATE UNIQUE INDEX idx_leads_username ON leads (username)"
        ],
        "listRule": "@request.auth.id != ''",
        "viewRule": "@request.auth.id != ''",
        "createRule": "@request.auth.id != ''",
        "updateRule": "@request.auth.id != ''",
        "deleteRule": "@request.auth.role = 'admin'"
    },
    {
        "name": "insta_actors",
        "type": "base",
        "system": false,
        "schema": [
            {
                "name": "username",
                "type": "text",
                "required": true,
                "options": {
                    "min": 1,
                    "max": 50
                }
            },
            {
                "name": "owner",
                "type": "relation",
                "required": true,
                "options": {
                    "collectionId": "users",
                    "cascadeDelete": false,
                    "maxSelect": 1
                }
            },
            {
                "name": "status",
                "type": "select",
                "required": true,
                "options": {
                    "values": [
                        "Active",
                        "Suspended By Team",
                        "Suspended By Insta",
                        "Discarded"
                    ]
                }
            },
            {
                "name": "last_activity",
                "type": "date",
                "required": false
            }
        ],
        "listRule": "@request.auth.id != ''",
        "viewRule": "@request.auth.id != ''",
        "createRule": "@request.auth.id != ''",
        "updateRule": "@request.auth.id != ''",
        "deleteRule": "@request.auth.role = 'admin'"
    },
    {
        "name": "cold_calls",
        "type": "base",
        "system": false,
        "schema": [
            {
                "name": "company",
                "type": "relation",
                "required": false,
                "options": {
                    "collectionId": "companies",
                    "cascadeDelete": false,
                    "maxSelect": 1
                }
            },
            {
                "name": "caller_name",
                "type": "text",
                "required": false,
                "options": {
                    "max": 100
                }
            },
            {
                "name": "recipients",
                "type": "text",
                "required": false,
                "options": {
                    "max": 200
                }
            },
            {
                "name": "call_outcome",
                "type": "select",
                "required": false,
                "options": {
                    "values": [
                        "Interested",
                        "Not Interested",
                        "Callback",
                        "No Answer",
                        "Wrong Number",
                        "Other"
                    ]
                }
            },
            {
                "name": "interest_level",
                "type": "number",
                "required": false,
                "options": {
                    "min": 1,
                    "max": 10
                }
            },
            {
                "name": "objections",
                "type": "json",
                "required": false
            },
            {
                "name": "pain_points",
                "type": "json",
                "required": false
            },
            {
                "name": "follow_up_actions",
                "type": "json",
                "required": false
            },
            {
                "name": "call_summary",
                "type": "text",
                "required": false,
                "options": {
                    "max": 5000
                }
            },
            {
                "name": "call_duration_estimate",
                "type": "text",
                "required": false,
                "options": {
                    "max": 50
                }
            },
            {
                "name": "model_used",
                "type": "text",
                "required": false,
                "options": {
                    "max": 50
                }
            },
            {
                "name": "phone_number",
                "type": "text",
                "required": false,
                "options": {
                    "max": 50
                }
            },
            {
                "name": "owner_name",
                "type": "text",
                "required": false,
                "options": {
                    "max": 100
                }
            },
            {
                "name": "claimed_by",
                "type": "relation",
                "required": false,
                "options": {
                    "collectionId": "users",
                    "cascadeDelete": false,
                    "maxSelect": 1
                }
            }
        ],
        "listRule": "@request.auth.id != ''",
        "viewRule": "@request.auth.id != ''",
        "createRule": "@request.auth.id != ''",
        "updateRule": "@request.auth.id != ''",
        "deleteRule": "@request.auth.role = 'admin'"
    },
    {
        "name": "call_transcripts",
        "type": "base",
        "system": false,
        "schema": [
            {
                "name": "call",
                "type": "relation",
                "required": true,
                "options": {
                    "collectionId": "cold_calls",
                    "cascadeDelete": true,
                    "maxSelect": 1
                }
            },
            {
                "name": "transcript",
                "type": "text",
                "required": true,
                "options": {
                    "max": 100000
                }
            }
        ],
        "indexes": [
            "CREATE UNIQUE INDEX idx_call_transcripts_call ON call_transcripts (call)"
        ],
        "listRule": "@request.auth.id != ''",
        "viewRule": "@request.auth.id != ''",
        "createRule": "@request.auth.id != ''",
        "updateRule": "@request.auth.id != ''",
        "deleteRule": "@request.auth.role = 'admin'"
    },
    {
        "name": "event_logs",
        "type": "base",
        "system": false,
        "schema": [
            {
                "name": "event_type",
                "type": "select",
                "required": true,
                "options": {
                    "values": [
                        "Outreach",
                        "Change in Tar Info",
                        "Tar Exception Toggle",
                        "User",
                        "System",
                        "Cold Call"
                    ]
                }
            },
            {
                "name": "actor",
                "type": "relation",
                "required": false,
                "options": {
                    "collectionId": "insta_actors",
                    "cascadeDelete": false,
                    "maxSelect": 1
                }
            },
            {
                "name": "user",
                "type": "relation",
                "required": false,
                "options": {
                    "collectionId": "users",
                    "cascadeDelete": false,
                    "maxSelect": 1
                }
            },
            {
                "name": "target",
                "type": "relation",
                "required": false,
                "options": {
                    "collectionId": "leads",
                    "cascadeDelete": false,
                    "maxSelect": 1
                }
            },
            {
                "name": "cold_call",
                "type": "relation",
                "required": false,
                "options": {
                    "collectionId": "cold_calls",
                    "cascadeDelete": false,
                    "maxSelect": 1
                }
            },
            {
                "name": "details",
                "type": "text",
                "required": false,
                "options": {
                    "max": 2000
                }
            },
            {
                "name": "source",
                "type": "text",
                "required": false,
                "options": {
                    "max": 100
                }
            }
        ],
        "listRule": "@request.auth.id != ''",
        "viewRule": "@request.auth.id != ''",
        "createRule": "@request.auth.id != ''",
        "updateRule": "",
        "deleteRule": "@request.auth.role = 'admin'"
    },
    {
        "name": "outreach_logs",
        "type": "base",
        "system": false,
        "schema": [
            {
                "name": "event",
                "type": "relation",
                "required": true,
                "options": {
                    "collectionId": "event_logs",
                    "cascadeDelete": true,
                    "maxSelect": 1
                }
            },
            {
                "name": "message_text",
                "type": "text",
                "required": false,
                "options": {
                    "max": 10000
                }
            },
            {
                "name": "sent_at",
                "type": "date",
                "required": false
            }
        ],
        "indexes": [
            "CREATE UNIQUE INDEX idx_outreach_logs_event ON outreach_logs (event)"
        ],
        "listRule": "@request.auth.id != ''",
        "viewRule": "@request.auth.id != ''",
        "createRule": "@request.auth.id != ''",
        "updateRule": "",
        "deleteRule": "@request.auth.role = 'admin'"
    },
    {
        "name": "goals",
        "type": "base",
        "system": false,
        "schema": [
            {
                "name": "metric",
                "type": "select",
                "required": true,
                "options": {
                    "values": [
                        "Total Messages Sent",
                        "Unique Profiles Contacted",
                        "Replies Received",
                        "Warm Leads Generated",
                        "Bookings Made",
                        "Payments Received",
                        "Calls Made",
                        "Calls Transcribed"
                    ]
                }
            },
            {
                "name": "target_value",
                "type": "number",
                "required": true,
                "options": {
                    "min": 1
                }
            },
            {
                "name": "frequency",
                "type": "select",
                "required": true,
                "options": {
                    "values": [
                        "Daily",
                        "Weekly",
                        "Monthly"
                    ]
                }
            },
            {
                "name": "assigned_to_user",
                "type": "relation",
                "required": false,
                "options": {
                    "collectionId": "users",
                    "cascadeDelete": false,
                    "maxSelect": 1
                }
            },
            {
                "name": "assigned_to_actor",
                "type": "relation",
                "required": false,
                "options": {
                    "collectionId": "insta_actors",
                    "cascadeDelete": false,
                    "maxSelect": 1
                }
            },
            {
                "name": "status",
                "type": "select",
                "required": true,
                "options": {
                    "values": [
                        "Active",
                        "Pending Suggestion",
                        "Rejected",
                        "Archived"
                    ]
                }
            },
            {
                "name": "suggested_by",
                "type": "relation",
                "required": false,
                "options": {
                    "collectionId": "users",
                    "cascadeDelete": false,
                    "maxSelect": 1
                }
            },
            {
                "name": "start_date",
                "type": "date",
                "required": false
            },
            {
                "name": "end_date",
                "type": "date",
                "required": false
            }
        ],
        "listRule": "@request.auth.id != ''",
        "viewRule": "@request.auth.id != ''",
        "createRule": "@request.auth.id != ''",
        "updateRule": "@request.auth.id != ''",
        "deleteRule": "@request.auth.role = 'admin'"
    },
    {
        "name": "rules",
        "type": "base",
        "system": false,
        "schema": [
            {
                "name": "type",
                "type": "select",
                "required": true,
                "options": {
                    "values": [
                        "Frequency Cap",
                        "Interval Spacing"
                    ]
                }
            },
            {
                "name": "metric",
                "type": "select",
                "required": true,
                "options": {
                    "values": [
                        "Total Messages Sent",
                        "Unique Profiles Contacted",
                        "Calls Made"
                    ]
                }
            },
            {
                "name": "limit_value",
                "type": "number",
                "required": true,
                "options": {
                    "min": 1
                }
            },
            {
                "name": "time_window_sec",
                "type": "number",
                "required": true,
                "options": {
                    "min": 1
                }
            },
            {
                "name": "severity",
                "type": "text",
                "required": false,
                "options": {
                    "max": 100
                }
            },
            {
                "name": "assigned_to_user",
                "type": "relation",
                "required": false,
                "options": {
                    "collectionId": "users",
                    "cascadeDelete": false,
                    "maxSelect": 1
                }
            },
            {
                "name": "assigned_to_actor",
                "type": "relation",
                "required": false,
                "options": {
                    "collectionId": "insta_actors",
                    "cascadeDelete": false,
                    "maxSelect": 1
                }
            },
            {
                "name": "status",
                "type": "select",
                "required": true,
                "options": {
                    "values": [
                        "Active",
                        "Pending Suggestion",
                        "Rejected",
                        "Archived"
                    ]
                }
            },
            {
                "name": "suggested_by",
                "type": "relation",
                "required": false,
                "options": {
                    "collectionId": "users",
                    "cascadeDelete": false,
                    "maxSelect": 1
                }
            }
        ],
        "listRule": "@request.auth.id != ''",
        "viewRule": "@request.auth.id != ''",
        "createRule": "@request.auth.id != ''",
        "updateRule": "@request.auth.id != ''",
        "deleteRule": "@request.auth.role = 'admin'"
    },
    {
        "name": "alerts",
        "type": "base",
        "system": false,
        "schema": [
            {
                "name": "created_by",
                "type": "relation",
                "required": true,
                "options": {
                    "collectionId": "users",
                    "cascadeDelete": false,
                    "maxSelect": 1
                }
            },
            {
                "name": "target_user",
                "type": "relation",
                "required": true,
                "options": {
                    "collectionId": "users",
                    "cascadeDelete": false,
                    "maxSelect": 1
                }
            },
            {
                "name": "entity_type",
                "type": "select",
                "required": true,
                "options": {
                    "values": [
                        "cold_call",
                        "lead",
                        "goal"
                    ]
                }
            },
            {
                "name": "entity_id",
                "type": "text",
                "required": false,
                "options": {
                    "max": 50
                }
            },
            {
                "name": "entity_label",
                "type": "text",
                "required": false,
                "options": {
                    "max": 200
                }
            },
            {
                "name": "alert_time",
                "type": "date",
                "required": false
            },
            {
                "name": "message",
                "type": "text",
                "required": false,
                "options": {
                    "max": 1000
                }
            },
            {
                "name": "is_dismissed",
                "type": "bool",
                "required": false
            }
        ],
        "listRule": "@request.auth.id != '' && (target_user = @request.auth.id || created_by = @request.auth.id)",
        "viewRule": "@request.auth.id != ''",
        "createRule": "@request.auth.id != ''",
        "updateRule": "target_user = @request.auth.id || created_by = @request.auth.id",
        "deleteRule": "@request.auth.role = 'admin'"
    },
    {
        "name": "notes",
        "type": "base",
        "system": false,
        "schema": [
            {
                "name": "title",
                "type": "text",
                "required": true,
                "options": {
                    "min": 1,
                    "max": 200
                }
            },
            {
                "name": "note_text",
                "type": "text",
                "required": true,
                "options": {
                    "max": 50000
                }
            },
            {
                "name": "created_by",
                "type": "relation",
                "required": true,
                "options": {
                    "collectionId": "users",
                    "cascadeDelete": false,
                    "maxSelect": 1
                }
            },
            {
                "name": "last_edited_by",
                "type": "relation",
                "required": false,
                "options": {
                    "collectionId": "users",
                    "cascadeDelete": false,
                    "maxSelect": 1
                }
            },
            {
                "name": "is_archived",
                "type": "bool",
                "required": false
            },
            {
                "name": "is_deleted",
                "type": "bool",
                "required": false
            },
            {
                "name": "deleted_at",
                "type": "date",
                "required": false
            }
        ],
        "listRule": "@request.auth.id != ''",
        "viewRule": "@request.auth.id != ''",
        "createRule": "@request.auth.id != ''",
        "updateRule": "@request.auth.id != ''",
        "deleteRule": "@request.auth.role = 'admin'"
    }
]